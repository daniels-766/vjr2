<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>VJR Dashboard</title>
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="icon" href="../static/assets/img/vjr3.png" type="image/x-icon" />

        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,400,600,700,800" rel="stylesheet">
        
        <link rel="stylesheet" href="../static/assets/node_modules/bootstrap/dist/css/bootstrap.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/@fortawesome/fontawesome-free/css/all.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/icon-kit/dist/css/iconkit.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/ionicons/dist/css/ionicons.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/perfect-scrollbar/css/perfect-scrollbar.css">
        <link rel="stylesheet" href="../static/assets/node_modules/datatables.net-bs4/css/dataTables.bootstrap4.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/jvectormap/jquery-jvectormap.css">
        <link rel="stylesheet" href="../static/assets/node_modules/tempusdominus-bootstrap-4/build/css/tempusdominus-bootstrap-4.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/weather-icons/css/weather-icons.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/c3/c3.min.css">
        <link rel="stylesheet" href="../static/assets/node_modules/perfect-scrollbar/css/perfect-scrollbar.css">
        <link rel="stylesheet" href="../static/assets/node_modules/owl.carousel/dist/assets/owl.carousel.css">
        <link rel="stylesheet" href="../static/assets/node_modules/owl.carousel/dist/assets/owl.theme.default.css">
        <link rel="stylesheet" href="../static/assets/dist/css/theme.min.css">
        <script src="../static/assets/js/vendor/modernizr-2.8.3.min.js"></script>
    </head>

    <body>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="custom-toast-container">
                    {% for category, message in messages %}
                        <div class="custom-toast custom-toast-{{ category }}">
                            <div class="toast-icon">
                                {% if category == 'success' %}
                                    ✅
                                {% elif category == 'error' %}
                                    ❌
                                {% else %}
                                    ℹ️
                                {% endif %}
                            </div>
                            <div class="toast-message">
                                <strong>
                                    {% if category == 'success' %}
                                        Success!
                                    {% elif category == 'error' %}
                                        Error!
                                    {% else %}
                                        Notice!
                                    {% endif %}
                                </strong>
                                <span>{{ message }}</span>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}
        <div class="wrapper">
            <header class="header-top" header-theme="light">
                <div class="container-fluid">
                    <div class="d-flex justify-content-between">
                        <div class="top-menu d-flex align-items-center">
                            <button type="button" id="navbar-fullscreen" class="nav-link"><i class="ik ik-maximize"></i></button>
                        </div>
                        <div class="top-menu d-flex align-items-center">
                            <button type="button" class="nav-link ml-10 right-sidebar-toggle">
                                <i class="ik ik-message-square"></i>
                                <span class="badge bg-success">{{ online_users_count }}</span>
                            </button>
                            <div class="dropdown">
                                <a class="dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><img class="avatar" src="../static/assets/img/vjr3.png" alt=""></a>
                                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                                    <a class="dropdown-item" href="{{ url_for('logout') }}"><i class="ik ik-power dropdown-icon"></i> Logout</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </header>

            <div class="page-wrap">
                <div class="app-sidebar colored">
                    <div class="sidebar-header">
                        <a class="header-brand" href="{{ url_for('dashboard') }}">
                            <div class="logo-img">
                            <img src="../static/assets/img/vjr2.png" 
                                class="header-brand-img" 
                                alt="lavalite" 
                                width="200" 
                                height="30">
                        </div>
                        </a>
                    </div>
                    
                    <div class="sidebar-content">
                        <div class="nav-container">
                            <nav id="main-menu-navigation" class="navigation-main">
                                <div class="nav-lavel">Navigation</div>
                                <div class="nav-item active">
                                    <a href="{{ url_for('dashboard') }}"><i class="ik ik-bar-chart-2"></i><span>Dashboard</span></a>
                                </div>
                                <div class="nav-item">
                                    <a href="{{ url_for('manage_users') }}"><i class="ik ik-user"></i><span>Account Management</span></a>
                                </div>
                                <div class="nav-item">
                                    <a href="{{ url_for('manage_group') }}"><i class="ik ik-users"></i><span>Group Management</span></a>
                                </div>
                                <div class="nav-lavel">Information</div>
                                <div class="nav-item">
                                    <a href="{{ url_for('upload_data') }}"><i class="ik ik-file-text"></i><span>Data Management</span></a>
                                </div>
                                <div class="nav-item">
                                    <a href="{{ url_for('my_case') }}"><i class="ik ik-edit"></i><span>Case Management</span></a>
                                </div>
                                <div class="nav-item">
                                    <a href="{{ url_for('login_logs') }}"><i class="ik ik-clock"></i><span>Log History</span></a>
                                </div>
                            </nav>
                        </div>
                    </div>
                </div>
                <div class="main-content">
                    <div class="container-fluid">
                        <div class="page-header">
                            <div class="row align-items-end">
                                <div class="col-lg-8">
                                    <div class="page-header-title">
                                        <i class="ik ik-bar-chart-2 bg-blue"></i>
                                        <div class="d-inline">
                                            <h5>Admin Dashboard</h5>
                                            <span>Detail Statistic account for admin</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <nav class="breadcrumb-container" aria-label="breadcrumb">
                                        <ol class="breadcrumb">
                                            <li class="breadcrumb-item">
                                                <a href="{{ url_for('dashboard') }}"><i class="ik ik-home"></i></a>
                                            </li>
                                            <li class="breadcrumb-item">
                                                <a href="{{ url_for('dashboard') }}">Dashboard</a>
                                            </li>
                                        </ol>
                                    </nav>
                                </div>
                            </div>
                        </div>
                        <div class="row clearfix">
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <div class="widget">
                                    <div class="widget-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="state">
                                                <h6>Total Data</h6>
                                                <h2>{{ total_data }}</h2>
                                            </div>
                                            <div class="icon">
                                                <i class="ik ik-award"></i>
                                            </div>
                                        </div>
                                        <small class="text-small mt-10 d-block">Total of all data on a user.</small>
                                    </div>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-danger" role="progressbar" aria-valuenow="62" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <div class="widget">
                                    <div class="widget-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="state">
                                                <h6>Data Remarks</h6>
                                                <h2>{{ data_remarks }}</h2>
                                            </div>
                                            <div class="icon">
                                                <i class="ik ik-thumbs-up"></i>
                                            </div>
                                        </div>
                                        <small class="text-small mt-10 d-block">Total of all data remarks on a user</small>
                                    </div>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-success" role="progressbar" aria-valuenow="78" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <div class="widget">
                                    <div class="widget-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="state">
                                                <h6>Users</h6>
                                                <h2>{{ total_users }}</h2>
                                            </div>
                                            <div class="icon">
                                                <i class="ik ik-user"></i>
                                            </div>
                                        </div>
                                        <small class="text-small mt-10 d-block">Total user</small>
                                    </div>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-warning" role="progressbar" aria-valuenow="31" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6 col-sm-12">
                                <div class="widget">
                                    <div class="widget-body">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="state">
                                                <h6>Group</h6>
                                                <h2>{{ total_groups }}</h2>
                                            </div>
                                            <div class="icon">
                                                <i class="ik ik-users"></i>
                                            </div>
                                        </div>
                                        <small class="text-small mt-10 d-block">Total group / company</small>
                                    </div>
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-info" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 100%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-7">
                                <div class="card">
                                    <div class="card-header"><h3>List Users</h3></div>
                                    <div class="card-body">
                                         <table id="advanced_table" class="table table-striped table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Group</th>
                                                    <th>Total Data</th>
                                                    <th>Data Remarks</th>
                                                    <th>Exp date</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for u in user_info %}
                                                <tr>
                                                    <td>{{ u.name }}</td>
                                                    <td>{{ u.group }}</td>
                                                    <td>{{ u.total_data }}</td>
                                                    <td>{{ u.remarks_data }}</td>
                                                    <td>{{ u.exp_date }}</td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-5">
                                <div class="card" style="min-height: 422px;">
                                    <div class="card-header"><h3>Remarks Chart</h3></div>
                                    <div class="card-body">
                                        <div id="c3-donut-chart"></div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="col-md-4">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex">
                                            <h4 class="card-title">Weather Report</h4>
                                        </div>
                                        <div class="d-flex align-items-center flex-row mt-30">
                                            <div class="p-2 f-50 text-info">
                                                <i id="weather-icon" class="wi"></i>
                                                <span id="temp">--<sup>°</sup></span>
                                            </div>
                                            <div class="p-2">
                                                <h3 class="mb-0" id="day-name">---</h3>
                                                <small id="location">Jakarta, Indonesia</small>
                                            </div>
                                        </div>
                                        <table class="table table-borderless">
                                            <tbody>
                                                <tr>
                                                    <td>Wind</td>
                                                    <td class="font-medium" id="wind">-- mph</td>
                                                </tr>
                                                <tr>
                                                    <td>Humidity</td>
                                                    <td class="font-medium" id="humidity">--%</td>
                                                </tr>
                                                <tr>
                                                    <td>Pressure</td>
                                                    <td class="font-medium" id="pressure">-- in</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <hr>
                                        <ul class="list-unstyled row text-center city-weather-days mb-0 mt-20">
                                            <li class="col"><i class="wi wi-time-3 mr-5"></i><span id="prev30-time">--:--</span><h3 id="prev30-temp">--<sup>°</sup></h3></li>
                                            <li class="col"><i class="wi wi-time-4 mr-5"></i><span id="next30-time">--:--</span><h3 id="next30-temp">--<sup>°</sup></h3></li>
                                            <li class="col"><i class="wi wi-time-5 mr-5"></i><span id="next60-time">--:--</span><h3 id="next60-temp">--<sup>°</sup></h3></li>
                                        </ul>
                                    </div>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>
                <aside class="right-sidebar" style="max-height: 600px; overflow-y: auto;">
                    <div class="sidebar-chat" data-plugin="chat-sidebar">
                        <div class="sidebar-chat-info">
                            <h6>List Account Active</h6>
                            <form class="mr-t-10">
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Search for account ..."> 
                                    <i class="ik ik-search"></i>
                                </div>
                            </form>
                        </div>
                        <div class="chat-list">
                            <div class="list-group row">
                                {% for user in all_users %}
                                <span class="list-group-item" data-chat-user="{{ user.username }}">
                                    <figure class="{{ 'user--online' if user.is_online() else 'user--busy' }}">
                                        <img src="{{ user.group_rel.logo or '/static/assets/img/default.png' }}"
                                            alt="{{ user.group_rel.company }} logo"
                                            class="rounded-circle img-40 align-top mr-15">
                                    </figure>
                                    <span>
                                        <span class="name">{{ user.username }}</span>
                                        <span class="username">{{ user.last_seen_ago() }}</span>
                                    </span>
                                </span>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </aside>

                <div class="chat-panel" hidden>
                    <div class="card">
                        <div class="card-header d-flex justify-content-between">
                            <a href="javascript:void(0);"><i class="ik ik-message-square text-success"></i></a>  
                            <span class="user-name">John Doe</span> 
                            <button type="button" class="close" aria-label="Close"><span aria-hidden="true">×</span></button>
                        </div>
                        <div class="card-body">
                            <div class="widget-chat-activity flex-1">
                                <div class="messages">
                                    <div class="message media reply">
                                        <figure class="user--online">
                                            <a href="#">
                                                <img src="../static/assets/img/users/3.jpg" class="rounded-circle" alt="">
                                            </a>
                                        </figure>
                                        <div class="message-body media-body">
                                            <p>Epic Cheeseburgers come in all kind of styles.</p>
                                        </div>
                                    </div>
                                    <div class="message media">
                                        <figure class="user--online">
                                            <a href="#">
                                                <img src="../static/assets/img/users/1.jpg" class="rounded-circle" alt="">
                                            </a>
                                        </figure>
                                        <div class="message-body media-body">
                                            <p>Cheeseburgers make your knees weak.</p>
                                        </div>
                                    </div>
                                    <div class="message media reply">
                                        <figure class="user--offline">
                                            <a href="#">
                                                <img src="../static/assets/img/users/5.jpg" class="rounded-circle" alt="">
                                            </a>
                                        </figure>
                                        <div class="message-body media-body">
                                            <p>Cheeseburgers will never let you down.</p>
                                            <p>They'll also never run around or desert you.</p>
                                        </div>
                                    </div>
                                    <div class="message media">
                                        <figure class="user--online">
                                            <a href="#">
                                                <img src="../static/assets/img/users/1.jpg" class="rounded-circle" alt="">
                                            </a>
                                        </figure>
                                        <div class="message-body media-body">
                                            <p>A great cheeseburger is a gastronomical event.</p>
                                        </div>
                                    </div>
                                    <div class="message media reply">
                                        <figure class="user--busy">
                                            <a href="#">
                                                <img src="../static/assets/img/users/5.jpg" class="rounded-circle" alt="">
                                            </a>
                                        </figure>
                                        <div class="message-body media-body">
                                            <p>There's a cheesy incarnation waiting for you no matter what you palete preferences are.</p>
                                        </div>
                                    </div>
                                    <div class="message media">
                                        <figure class="user--online">
                                            <a href="#">
                                                <img src="../static/assets/img/users/1.jpg" class="rounded-circle" alt="">
                                            </a>
                                        </figure>
                                        <div class="message-body media-body">
                                            <p>If you are a vegan, we are sorry for you loss.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <form action="javascript:void(0)" class="card-footer" method="post">
                            <div class="d-flex justify-content-end">
                                <textarea class="border-0 flex-1" rows="1" placeholder="Type your message here"></textarea>
                                <button class="btn btn-icon" type="submit"><i class="ik ik-arrow-right text-success"></i></button>
                            </div>
                        </form>
                    </div>
                </div>

                <footer class="footer">
                    <div class="w-100 clearfix">
                        <span class="text-center text-sm-left d-md-inline-block">Copyright © 2025 VJR. All Rights Reserved.</span>
                    </div>
                </footer>
                
            </div>
        </div>
        
        
        

        <div class="modal fade apps-modal" id="appsModal" tabindex="-1" role="dialog" aria-labelledby="appsModalLabel" aria-hidden="true" data-backdrop="false">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="ik ik-x-circle"></i></button>
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="quick-search">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-4 ml-auto mr-auto">
                                    <div class="input-wrap">
                                        <input type="text" id="quick-search" class="form-control" placeholder="Search..." />
                                        <i class="ik ik-search"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-body d-flex align-items-center">
                        <div class="container">
                            <div class="apps-wrap">
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-bar-chart-2"></i><span>Dashboard</span></a>
                                </div>
                                <div class="app-item dropdown">
                                    <a href="#" class="dropdown-toggle" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="ik ik-command"></i><span>Ui</span></a>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                        <a class="dropdown-item" href="#">Action</a>
                                        <a class="dropdown-item" href="#">Another action</a>
                                        <a class="dropdown-item" href="#">Something else here</a>
                                    </div>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-mail"></i><span>Message</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-users"></i><span>Accounts</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-shopping-cart"></i><span>Sales</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-briefcase"></i><span>Purchase</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-server"></i><span>Menus</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-clipboard"></i><span>Pages</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-message-square"></i><span>Chats</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-map-pin"></i><span>Contacts</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-box"></i><span>Blocks</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-calendar"></i><span>Events</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-bell"></i><span>Notifications</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-pie-chart"></i><span>Reports</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-layers"></i><span>Tasks</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-edit"></i><span>Blogs</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-settings"></i><span>Settings</span></a>
                                </div>
                                <div class="app-item">
                                    <a href="#"><i class="ik ik-more-horizontal"></i><span>More</span></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script>window.jQuery || document.write('<script src="src/js/vendor/jquery-3.3.1.min.js"><\/script>')</script>
        <script src="../static/assets/node_modules/popper.js/dist/umd/popper.min.js"></script>
        <script src="../static/assets/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
        <script src="../static/assets/node_modules/perfect-scrollbar/dist/perfect-scrollbar.min.js"></script>
        <script src="../static/assets/node_modules/screenfull/dist/screenfull.js"></script>
        <script src="../static/assets/node_modules/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
        <script src="../static/assets/node_modules/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
        <script src="../static/assets/node_modules/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
        <script src="../static/assets/node_modules/jvectormap/jquery-jvectormap.min.js"></script>
        <script src="../static/assets/node_modules/jvectormap/tests/assets/jquery-jvectormap-world-mill-en.js"></script>
        <script src="../static/assets/node_modules/moment/moment.js"></script>
        <script src="../static/assets/node_modules/tempusdominus-bootstrap-4/build/js/tempusdominus-bootstrap-4.min.js"></script>
        <script src="../static/assets/node_modules/d3/dist/d3.min.js"></script>
        <script src="../static/assets/node_modules/c3/c3.min.js"></script>
        <script src="../static/assets/js/tables.js"></script>
        <script src="../static/assets/js/widgets.js"></script>
        <script src="../static/assets/js/charts.js"></script>
        <script src="../static/assets/dist/js/theme.min.js"></script>
        <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
        <script>
            setTimeout(function() {
                var alerts = document.querySelectorAll('.alert');
                alerts.forEach(function(alert) {
                    alert.classList.remove('show');
                    alert.classList.add('fade');
                    setTimeout(function() {
                        alert.remove();
                    }, 150);
                });
            }, 3000);
        </script>
        <script>
            $(document).ready(function () {
                $('#advanced_table').DataTable({
                    destroy: true, 
                    pageLength: 5,
                    lengthMenu: [5, 10, 25, 50],
                    ordering: true,
                    searching: true,
                    info: true,
                    paging: true,
                    columnDefs: [
                        { type: 'string', targets: [0, 1] },
                        { type: 'num', targets: [2, 3] },
                        { type: 'date', targets: [4] }
                    ]
                });
            });
        </script>

        <script>
            var donutData = {{ donut_data|tojson }};

            var totalData = donutData.reduce(function (sum, item) {
                return sum + item[1];
            }, 0);

            var c3DonutChart = c3.generate({
                bindto: '#c3-donut-chart',
                data: {
                    columns: donutData,
                    type: 'donut'
                },
                color: {
                    pattern: [
                        '#58d8a3', '#04bdfe', '#ed1c24', '#ffc107', '#9c27b0',
                        '#3f51b5', '#8bc34a', '#ff5722', '#795548', '#607d8b'
                    ]
                },
                donut: {
                    title: totalData + " Data" 
                },
                tooltip: {
                    format: {
                        value: function (value, ratio, id) {
                            return value + ' data (' + (ratio * 100).toFixed(1) + '%)';
                        }
                    }
                }
            });
        </script>
        <script>
            document.addEventListener("DOMContentLoaded", function() {
                const searchInput = document.querySelector(".sidebar-chat-info input");
                const items = document.querySelectorAll(".list-group-item");

                searchInput.addEventListener("keyup", function() {
                    const query = this.value.toLowerCase();
                    items.forEach(item => {
                        const name = item.querySelector(".name").textContent.toLowerCase();
                        const username = item.querySelector(".username").textContent.toLowerCase();
                        if (name.includes(query) || username.includes(query)) {
                            item.style.display = "";
                        } else {
                            item.style.display = "none";
                        }
                    });
                });
            });
            </script>
            <script>
            async function getWeather() {
                const url = "https://api.open-meteo.com/v1/forecast?latitude=-6.2&longitude=106.8&current_weather=true&minutely_15=temperature_2m,relativehumidity_2m,surface_pressure";

                try {
                    const response = await fetch(url);
                    const data = await response.json();

                    const weather = data.current_weather;
                    const minutelyTimes = data.minutely_15.time;
                    const minutelyTemps = data.minutely_15.temperature_2m;

                    document.getElementById("temp").innerHTML = `${Math.round(weather.temperature)}<sup>°</sup>`;

                    const nowIndex = minutelyTimes.indexOf(weather.time);
                    
                    if (nowIndex !== -1) {
                        const prev30 = minutelyTemps[nowIndex - 2] ?? "N/A";
                        const next30 = minutelyTemps[nowIndex + 2] ?? "N/A";
                        const next60 = minutelyTemps[nowIndex + 4] ?? "N/A";

                        document.getElementById("prev30-temp").innerHTML = `${Math.round(prev30)}<sup>°</sup>`;
                        document.getElementById("next30-temp").innerHTML = `${Math.round(next30)}<sup>°</sup>`;
                        document.getElementById("next60-temp").innerHTML = `${Math.round(next60)}<sup>°</sup>`;

                        // Jamnya
                        document.getElementById("prev30-time").textContent = minutelyTimes[nowIndex - 2]?.slice(11, 16) ?? "--:--";
                        document.getElementById("next30-time").textContent = minutelyTimes[nowIndex + 2]?.slice(11, 16) ?? "--:--";
                        document.getElementById("next60-time").textContent = minutelyTimes[nowIndex + 4]?.slice(11, 16) ?? "--:--";
                    }

                    // Angin
                    document.getElementById("wind").textContent = `${weather.windspeed} km/h`;

                    // Humidity & Pressure sekarang
                    document.getElementById("humidity").textContent = `${data.minutely_15.relativehumidity_2m[nowIndex]}%`;
                    document.getElementById("pressure").textContent = `${data.minutely_15.surface_pressure[nowIndex]} hPa`;

                    // Hari
                    document.getElementById("day-name").textContent = new Date().toLocaleDateString('en-US', { weekday: 'long' });

                } catch (error) {
                    console.error("Gagal mengambil data cuaca", error);
                }
            }

            getWeather();
            </script>

            <script>
            function updateJakartaTimes() {
                const now = new Date().toLocaleString("en-US", { timeZone: "Asia/Jakarta" });
                let jakartaTime = new Date(now);

                // Format jam dan menit
                function formatTime(date) {
                    return date.toLocaleTimeString("en-US", {
                        hour: "2-digit",
                        minute: "2-digit",
                        hour12: false,
                        timeZone: "Asia/Jakarta"
                    });
                }

                let prev30 = new Date(jakartaTime.getTime() - 30 * 60 * 1000);
                let next30 = new Date(jakartaTime.getTime() + 30 * 60 * 1000);
                let next60 = new Date(jakartaTime.getTime() + 60 * 60 * 1000);

                document.getElementById("prev30-time").textContent = formatTime(prev30);
                document.getElementById("next30-time").textContent = formatTime(next30);
                document.getElementById("next60-time").textContent = formatTime(next60);
            }

            setInterval(updateJakartaTimes, 1000);

            updateJakartaTimes();
            </script>

    </body>
</html>
